{"version":3,"file":"js/604.951acce9.js","mappings":"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","sources":["webpack://frontend/./src/views/carrito/pagoCartApp.vue","webpack://frontend/./src/views/carrito/pagoCartApp.vue?7564"],"sourcesContent":["<template>\n  <div>\n    <section class=\"hero\">\n      <div class=\"container\">\n        <!-- Hero Content-->\n        <div class=\"hero-content pb-5 text-center mt-4\">\n          <h3 class=\"\">Checkout</h3>\n          <div class=\"row\">   \n            <div class=\"col-xl-8 offset-xl-2\"><p class=\"lead text-muted\">Por favor revisa tu orden.</p></div>\n          </div>\n        </div>\n      </div>\n    </section>\n    <!-- Checkout-->\n    <section>\n      <div class=\"container\">\n        <div class=\"row\">\n          <div class=\"col-lg-8\">\n\n            <div class=\"block mb-5\">\n              <div class=\"block-header\">\n                <h6 class=\"text-uppercase mb-0\"><b>Dirección de entrega</b></h6>\n            </div>\n              <div class=\"block-body\">\n                <div class=\"row\">\n                  <div class=\"mb-4 col-md-6 d-flex align-items-center\" v-for=\"item in direcciones\">\n                    <input type=\"radio\" name=\"shippping\" id=\"option0\" :value=\"item._id\" v-on:change=\"seleccionar_direccion($event)\">\n                    <label class=\"ms-3\" for=\"option0\"><strong class=\"d-block text-uppercase mb-2\">{{ item.calle+', '+item.colonia }}</strong>\n                      <span class=\"text-muted \">{{'CP: '+item.codigo_postal+', '+item.ciudad+', '+item.estado}}</span> <br>\n                      <span class=\"text-muted \">{{'Tel: '+item.n_contacto}}</span>\n                    </label>\n                  </div>\n                </div>\n              </div>\n\n            </div>\n           \n            <div class=\"mb-5\">\n              <div class=\"cart\">\n                <div class=\"cart-wrapper\">\n                  <div class=\"cart-header text-center \">\n                    <div class=\"row\">\n                      <div class=\"col-6\">\n                        <span class=\"text-left\">Producto</span>\n                      </div>\n                      <div class=\"col-2\">Precio</div>\n                      <div class=\"col-2\">Cantidad</div>\n                      <div class=\"col-2\">Total</div>\n                    </div>\n                  </div>\n                  <div class=\"cart-body\">\n                    <!-- Product-->\n                    <div class=\"\" v-for=\"item in productos\" >\n                      <div class=\"row d-flex align-items-center text-center\">\n                        <div class=\"col-6\">\n                          <div class=\"d-flex align-items-center\"><a href=\"detail.html\"><img class=\"cart-item-img\" :src=\"$url+'/obtener_portada_producto/'+item.producto.portada\"  alt=\"...\"></a>\n                            <div class=\"cart-title text-start\"><a class=\"text-uppercase text-dark\" href=\"detail.html\"><strong>{{item.producto.nombre.substr(0,20)}}</strong></a><br><span class=\"text-muted text-sm\">Talla: {{ item.variedad.talla }}</span><br><span class=\"text-muted text-sm\">Color: {{ item.variedad.color }}</span>\n                            </div>\n                          </div>\n                        </div>\n                        <div class=\"col-2\">{{ convertCurrency(item.producto.precio) }}</div>\n                        <div class=\"col-2\">{{ item.cantidad }}\n                        </div>\n                        <div class=\"col-2 text-center\">{{ convertCurrency(item.producto.precio*item.cantidad) }}</div>\n                      </div>\n                    </div>\n                    \n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"mb-5 d-flex justify-content-between flex-column flex-lg-row\"><router-link class=\"btn  btn-dark\" to=\"/detalles_carrito\"> <i class=\"fa fa-angle-left me-2\" ></i>Regresar al carrito</router-link><a class=\"btn btn-dark\" href=\"checkout5.html\">Generar la orden<i class=\"fa fa-angle-right ms-2\"></i></a></div>\n          </div>\n          <div class=\"col-lg-4\">\n            <div class=\"block mb-5\">\n              <div class=\"block-header\">\n                <h6 class=\"text-uppercase mb-0\"><b>Tu orden</b></h6>\n              </div>\n              <div class=\"block-body bg-light pt-1\">\n                <p class=\"text-sm\">El costo del envio puede variar dependiendode Codigo postal.</p>\n                <ul class=\"order-summary mb-0 list-unstyled\">\n                  <li class=\"order-summary-item\"><span>Subtotal: </span><span class=\"ms-6\">{{ convertCurrency(total) }}</span></li>\n                  <li class=\"order-summary-item\"><span>Envio:</span><span class=\"ms-6\">{{ convertCurrency(envio) }}</span></li>\n               \n                  <li class=\"order-summary-item border-0\"><span>Total:</span><strong class=\"order-summary-total ms-6 \" >{{ convertCurrency(total+envio) }}</strong></li>\n                </ul>\n              </div>\n            </div>\n\n            <div class=\"block mb-5\" >\n              <div class=\"block-header\">\n                  <h6 class=\"text-uppercase mb-0\"><b>Método de pago </b></h6>\n              </div>\n              <div class=\"block-body bg-light pt-1 mb-3\">\n                  <div class=\"col-md-12 mb-2\">\n                   \n                    <span class=\"d-block  mb-2\" style=\"letter-spacing: 0px;font-weight: 600;\">Tarjeta de crédito o débito</span>\n                      <div class=\"row\">\n                          <div class=\"col-12 mb-2\">\n                              <img style=\"width: 180px\">\n                          </div>\n                          <div class=\"col-12\">\n                              <p class=\"text-muted\" style=\"font-size: 13px\">\n                                  (Luego de hacer clic en \"PAGAR\" será redirigido a Mercado Pago  de forma segura para completar su compra).</p>\n                          </div>\n                      </div>\n                  </div>\n                  \n               \n  \n                  <div class=\"col-md-12\">\n                      <p class=\"text-sm\" style=\"margin-bottom: 0.4rem;\">Deberes e impuestos no están incluidos en paquetes con envio internacional. /Tus datos personales serán utilizados para procesar tu pedido y respaldar tu experiencia en este sitio web.</p>\n                      <a > <b> Términos & Privacidad.</b></a>\n                  </div>\n  \n              </div>\n              <div class=\"block-footer\">\n                <a  class=\"btn btn-dark\" id=\"btnBuy\" style=\"cursor:pointer;width: 100%;\" v-on:click=\"mecadopago() \">PAGAR</a>\n               <!--  <button class=\"btn btn-dark btnBuy\" style=\"cursor: pointer\" disabled>Procesando...</button> -->\n               \n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n\n<script>\nimport axios from 'axios'\nvar currencyFormatter = require ('currency-formatter');\n\nexport default {\n  name: 'pagoCartApp',\n  data(){\n    return{\n      direcciones:[],\n      productos:[],\n      total: 0,\n      envio: 1,\n      load_data: true,\n      venta:{},\n      items: []\n    }\n  },\n  methods:{\n    init_carrito() {\n      if(this.$store.state.token != null){\n        this.load_data = true\n        this.total = 0\n        axios.get(this.$url + \"/obtener_carrito\", {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: this.$store.state.token,\n          },\n        })\n        .then((result) => {\n          console.log(result.data.cart_general)\n          this.n_productos = result.data.cart_general.length\n          for(var item of result.data.cart_general){\n            let subtotal = item.producto.precio * item.cantidad\n            this.total = this.total + subtotal \n            this.items.push({\n              id: item.producto._id,\n              title: item.producto.nombre,\n              quantity: item.cantidad,\n              currency_id: 'MXN',\n              unit_price: item.producto.precio,\n            })\n          }\n          this.productos = result.data.cart_general\n          this.load_data = false\n        }); \n      }\n    },\n    convertCurrency(number){\n          return currencyFormatter.format(number,{code:'MXN'})\n    },\n    init_direcciones(){\n      axios.get(this.$url + \"/obtener_direccion_cliente\",{\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: this.$store.state.token,\n          },\n        }).then((result)=>{\n          this.direcciones = result.data.direccion\n        })\n    },\n    seleccionar_direccion(event){\n      this.venta.direccion = event.target.value\n    },\n    mecadopago(){\n      let data = {\n        back_urls: {\n          success: 'https://nishinashop.onrender.com/validation/success',\n          pending: 'https://nishinashop.onrender.com/validation/pending',\n          failure: 'https://nishinashop.onrender.com/validation/failure'\n        },\n        items: this.items, \n        auto_return: 'approved',\n      }\n      axios.post('https://api.mercadopago.com/checkout/preferences',data,{\n        headers:{\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer TEST-7802715175959909-050803-6580fa6051eed313c72af5b01407940f-2426338693'\n        }\n      }).then((result)=>{\n        window.location.href = result.data.sandbox_init_point\n      }).catch((error) => {\n  console.error(\"Error detallado:\", {\n    status: error.response?.status,\n    data: error.response?.data,\n    message: error.message\n  });\n});\n    \n    }\n  },\n  beforeMount(){\n    this.init_carrito()\n    this.init_direcciones()\n  }\n}\n\n</script>\n","import { render } from \"./pagoCartApp.vue?vue&type=template&id=78a50708\"\nimport script from \"./pagoCartApp.vue?vue&type=script&lang=js\"\nexport * from \"./pagoCartApp.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","for","href","direcciones","item","type","name","id","value","_id","seleccionar_direccion","$event","calle","colonia","codigo_postal","ciudad","estado","n_contacto","productos","src","$url","producto","portada","alt","nombre","substr","variedad","talla","color","convertCurrency","precio","cantidad","to","total","envio","style","mecadopago","currencyFormatter","data","load_data","venta","items","methods","init_carrito","this","$store","state","token","axios","get","headers","Authorization","then","result","console","log","cart_general","n_productos","length","subtotal","push","title","quantity","currency_id","unit_price","number","format","code","init_direcciones","direccion","event","target","back_urls","success","pending","failure","auto_return","post","window","location","sandbox_init_point","catch","error","status","response","message","beforeMount","__exports__","render"],"sourceRoot":""}